<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>这是一个神奇的主题</title>
    <link rel="stylesheet" href="//cdn.yesuanzao.cn/blog/chicken.css">
    <link rel="stylesheet" href="/css/iconfont.css">
    <link rel="stylesheet" href="//cdn.yesuanzao.cn/blog/atom-one-dark.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.11.1/katex.min.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/tocbot/4.10.0/tocbot.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/5.12.1/css/all.min.css">
<meta name="generator" content="Hexo 4.2.0"></head>

<body>
    <header>
    <div class="container">
        <div class="site-title"><a href="/">小鸡米花的知识库</a></div>
        <nav>
            <a class="nav-item " href="/">主页</a>
            <a class="nav-item " href="/archives">时光轴</a>
        </nav>
    </div>
</header>
    <div id="write">
    <div class="container">
        <div class="post-info">
            <ul class="tag-list">
                
            </ul>
        </div>
        <div class="post-content"><h1 id="大前端笔记之23-🐈-Git"><a href="#大前端笔记之23-🐈-Git" class="headerlink" title="大前端笔记之23 🐈 Git"></a>大前端笔记之23 🐈 Git</h1><p>Git 是目前最主流的分布式版本管理系统，它可以将项目多个不同的版本状态保存起来，以便随时取回之前的版本进行重写或查阅。</p>
<p>既然有分布式，那么与之相对的便是集中式，比如 SVN。集中式版本管理是将版本库保存在一个统一的中央服务器，其它用户都需要通过网络连接中央服务器，如果要修改项目，则需要先从中央服务器获取到版本库的文件，修改完成后再提交回去。而分布式版本管理则是将版本库保存到用户本机上，如果有需要，则只需两个人同步，就能获取到对方更新后的版本了。</p>
<h2 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h2><p>首先在<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">官网</a>下载对应版本的 Git，根据提示安装即可。</p>
<p>打开任意文件夹，右键选择<code>Git Bash Here</code>，打开 Git 的命令行窗口，输入<code>git --version</code>，如果出现版本号信息（如<code>git version 2.24.0.windows.2</code>），则说明安装成功。</p>
<p>在第一次使用 Git 之前，需要先配置提交人的姓名和邮箱。其中的<code>--global</code>表示全局配置，即本地所有的仓库都采用该配置。</p>
<pre><code class="powershell">git config --global user.name 小鸡米花         # 配置姓名
git config --global user.email test@163.com   # 配置邮箱
git config --list                             # 查看所有配置信息</code></pre>
<h2 id="提交修改"><a href="#提交修改" class="headerlink" title="提交修改"></a>提交修改</h2><p>在使用 Git 之前，需要先明确几个概念。首先，用户编辑文件的项目目录称为<strong>工作区</strong>，也就是电脑上能直接看到的目录。当文件发生修改后，需要先将文件添加到<strong>暂存区</strong>，如果有多个文件就可以添加多次，它类似于购物车，当你选好所有的商品后一并付款，这样可以将多个文件的变更统一作为一个版本修改。当本次暂存区的所有文件修改完毕后，将它们一并提交到<strong>仓库</strong>，进行持久化保存。</p>
<h3 id="初始化仓库"><a href="#初始化仓库" class="headerlink" title="初始化仓库"></a>初始化仓库</h3><p>在项目文件夹下使用<code>git init</code>命令初始化仓库，此时项目文件夹会出现一个<code>.git</code>的隐藏文件夹。它是当前项目的版本管理仓库，暂存区和仓库都保存在这里。</p>
<h3 id="添加到暂存区"><a href="#添加到暂存区" class="headerlink" title="添加到暂存区"></a>添加到暂存区</h3><p>在项目文件夹下随便新建一个文本文件<code>index.html</code>，然后使用命令<code>git add index.html</code>告诉 Git 跟踪该文件，也就是将该文件添加到暂存区。</p>
<h3 id="提交到仓库"><a href="#提交到仓库" class="headerlink" title="提交到仓库"></a>提交到仓库</h3><p>使用<code>git commit -m 提交内容</code>将跟踪的文件提交到仓库保存，也就是将暂存区的文件提交到仓库。Git 会提示提交的文件数量，新增和删除了多少行数据。其中<code>-m</code>之后表示这次提交的内容，<strong>必须写</strong>清楚以便之后查阅。否则会弹出一个文件要求输入提交内容，关闭文件之后才会继续提交操作。</p>
<blockquote>
<p>注意，版本管理工具不能跟踪二进制文件内容的变化，只能跟踪它们的大小或日期。</p>
</blockquote>
<h3 id="查看仓库状态"><a href="#查看仓库状态" class="headerlink" title="查看仓库状态"></a>查看仓库状态</h3><p>然后对文件进行一些修改，使用<code>git status</code>命令，可以查看当前仓库的状态。其中第一行括号提示文件没有被跟踪，以红色的文件名标识；第二行括号提示<code>index.html</code>文件发生了修改，但是还没有被提交。</p>
<p><img src="https://ae01.alicdn.com/kf/H30b97f8b14d545a7bee29a40f72c4b0a7.jpg" alt=""></p>
<p>接下来继续使用<code>git add index.html</code>和<code>git commit -m &quot;第一次修改&quot;</code>提交修改，再使用<code>git status</code>命令，便提示没有需要提交的内容了。</p>
<h3 id="比较差异"><a href="#比较差异" class="headerlink" title="比较差异"></a>比较差异</h3><p>使用<code>git diff</code>命令可以查看工作区文件与暂存区文件有哪些不同。使用<code>git diff --cached</code>命令可以查看暂存区文件与仓库文件（最近的一次提交）有哪些不同。</p>
<h2 id="时光机穿梭"><a href="#时光机穿梭" class="headerlink" title="时光机穿梭"></a>时光机穿梭</h2><h3 id="查看提交记录"><a href="#查看提交记录" class="headerlink" title="查看提交记录"></a>查看提交记录</h3><p>使用<code>git log</code>命令可以查看所有的仓库提交记录，每条记录以一长串的字符作为本次提交的<code>id</code>，下面是提交的作者和时间。如果感觉信息太乱，可以使用<code>git log --pretty=oneline</code>命令隐藏作者和时间，使其显示在一行。</p>
<p><img src="https://ae01.alicdn.com/kf/H18c7b498c4a3437e98dd2f490bea9f92m.jpg" alt=""></p>
<p>第一条记录后面括号中的<code>HEAD</code>表示这是最近的一次提交（后面的<code>master</code>表示主分支，见下文）。</p>
<blockquote>
<p>如果记录显示后控制台不能操作，按下<kbd>Q</kbd>即可。</p>
</blockquote>
<h3 id="回退版本"><a href="#回退版本" class="headerlink" title="回退版本"></a>回退版本</h3><p>如果希望回退到上一个的版本，使用<code>git reset --hard HEAD</code>命令，其中<code>HEAD</code>表示上一个版本，<code>HEAD^</code>表示上上个版本。当版本回退之后，使用<code>git log</code>命令就无法再查看最新的版本了（比如<code>c7c9f2</code>开头的这条就消失了），如果要回到这条版本，则需要使用<code>git reset --hard c7c9f2</code>命令，后面的编号为记录编号，不需要写全，通常取前 6 位即可。</p>
<p>但是，如果关闭了控制台，那么新版本编号就看不到了，此时需要使用<code>git reflog</code>命令查看指令输入的历史记录，从中就可以找到对应的编号了。</p>
<p><img src="https://ae01.alicdn.com/kf/H2d91db357384459c817ffb66b1672556a.jpg" alt=""></p>
<h3 id="撤销修改"><a href="#撤销修改" class="headerlink" title="撤销修改"></a>撤销修改</h3><p>如果修改了文件内容，还没有提交到暂存区，那么使用<code>git checkout -- 文件名</code>可以撤销工作区的修改。</p>
<p>如果修改了文件内容，而且提交到暂存区了，那么使用<code>git reset HEAD 文件名</code>可以将暂存区恢复为最近的一次提交，这样就回到了第一步。</p>
<p>如果修改了文件内容，而且不但提交到了暂存区，也提交到了本地仓库，那么直接回退版本。</p>
<p>如果修改了文件内容，而且还提交到了远程仓库（见下文），那么就等着 GG 吧。</p>
<h3 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h3><p>如果要删除工作区的文件，那么可以使用<code>git rm 文件名</code>命令，该命令会自动将删除操作同步到暂存区。如果已经先手动删除了文件，那么也需要使用该命令将操作同步。接下来继续使用<code>git commit</code>命令提交修改到仓库，那么该文件就会从仓库中被删除。</p>
<p>如果要恢复被删除的文件，与上文撤销修改其实是一样的。</p>
<h3 id="忽略文件"><a href="#忽略文件" class="headerlink" title="忽略文件"></a>忽略文件</h3><p>实际开发中由于一次添加的文件比较多，如果手动去挨个添加会比较繁琐。Git 提供了忽略文件清单的功能，在项目文件夹下新建一个后缀为<code>.gitignore</code>的文件（不需要文件名），在其中写明要忽略的文件或文件夹（如果省略了后缀名，那么 Git 会将其识别为文件夹），那么 Git 就不会跟踪这些文件了。</p>
<pre><code class="powershell"># .gitignore

test.html
public/test_images</code></pre>
<p>接下来，只需要使用<code>git add .</code>命令就可以将所有文件添加到暂存区了。</p>
<h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><p>之前的操作都是在一条时间线上完成的，这条时间线被称为<strong>主分支</strong>（master）。分支可以使不同的工作分开进行，例如开发分支、功能分支、Bug 修复分支等。</p>
<p>严格说来，<code>HEAD</code>直接指向的并不是最近的一次提交，而是指向的<code>master</code>，而<code>master</code>指向的才是最近一次提交。</p>
<p><img src="https://ae01.alicdn.com/kf/H74a57d0d493f47a28d69f436183a543fF.jpg" alt=""></p>
<p>当新的分支创建后，Git 会创建一个新的指针，指向当前最近一次提交，并将<code>HEAD</code>指向该分支指针。</p>
<p><img src="https://ae01.alicdn.com/kf/Hf6b95de15895464092eec989a286d2adZ.jpg" alt=""></p>
<p>接下来，对工作区的操作就会针对该<code>dev</code>分支了，当再次提交新版本时，<code>master</code>依然指向原来的版本，而<code>dev</code>则指向了新提交的版本。</p>
<p><img src="https://ae01.alicdn.com/kf/H4271a66fd65d40f8ad5697757e58ccd1K.jpg" alt=""></p>
<p>如果<code>dev</code>的工作完成了，就可以将该分支合并到主分支上，所谓合并，其实将<code>master</code>重新指向最新版本，并将<code>HEAD</code>指向它。</p>
<p><img src="https://ae01.alicdn.com/kf/H3b3ad377372f42b8870b28015ab4168aW.jpg" alt=""></p>
<p>最后，只需要删除掉<code>dev</code>指针，那么就只剩下一条主分支了。</p>
<p><img src="https://ae01.alicdn.com/kf/H6216e25f96354ccfbc280e532138086aZ.jpg" alt=""></p>
<p>使用<code>git branch</code>命令可以查看目前所有的分支。分支前的<code>*</code>和绿色字体表示这是当前分支。</p>
<p>使用<code>git branch dev</code>命令可以基于当前分支创建一个<code>dev</code>分支。</p>
<p>使用<code>git checkout dev</code>命令或者<code>git switch dev</code>可以切换到<code>dev</code>分支。</p>
<p>上述两条命令可以简写成<code>git checkout -b dev</code>或者<code>git switch -c dev</code>一条。</p>
<blockquote>
<p>由于<code>checkout</code>命令既用于撤销修改，又用于切换分支，容易令人迷惑，因此新版本中添加了<code>switch</code>命令用来切换分支。</p>
</blockquote>
<p>使用<code>git merge dev</code>命令可以将当前分支与<code>dev</code>分支合并。</p>
<p>使用<code>git branch -d dev</code>命令可以将<code>dev</code>分支删除，不过要求该分支必须被合并，防止误删。使用<code>git branch -D dev</code>命令可以强制删除分支。</p>
<h2 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h2><p>上述的所有操作都是在本地仓库完成的，如果需要与其他人协作，那么就需要一个公共区域供大家下载和推送自己本地的代码。GitHub 是目前世界上最流行的远程仓库和多人协作开发平台，开发者 A 可以将本地的仓库推送到 GitHub 上的远程仓库，然后开发者 B 就可以将其拉取下来，在本地开发完成后再推送到远程仓库，这样就可以完成协作了。</p>
<p>在 GitHub 上注册账号后，需要先创建一个远程仓库（repository）。点击导航栏右上角的加号，选择<code>New repository</code>即可打开创建新仓库的页面。在页面中填写项目名称<code>test</code>，选择默认的<code>public</code>即公开权限，点击下面的绿色按钮创建即可。</p>
<p><img src="https://ae01.alicdn.com/kf/Hd8e883f7a2884658b6bbeb601a23fa8eg.jpg" alt=""></p>
<h3 id="推送本地仓库"><a href="#推送本地仓库" class="headerlink" title="推送本地仓库"></a>推送本地仓库</h3><p>项目管理者将仓库创建完成后，进入该仓库页面。首先，使用<code>git push 远程仓库地址 分支名称</code>命令（如<code>git push https://github.com/ChickenPopcorny/test.git master</code>）将本地仓库推送到远程仓库。这时会弹出一个窗口，提示输入该账号的用户名和密码（之后系统会将其保存起来，不需要再次输入）。推送完成后，在远程仓库页面刷新，就可以看到推送的文件了。</p>
<p>但是每次粘贴地址比较麻烦，因此可以先使用<code>git remote add origin https://github.com/ChickenPopcorny/test.git</code>命令为远程地址起一个别名<code>origin</code>（自定义的，可以修改），然后再使用<code>git push origin master</code>命令就可以了。</p>
<p>如果使用<code>git push -u origin master</code>命令，那么表示将当前远程地址和分支作为临时的默认推送地址，那么之后只需要使用<code>git push</code>即可。</p>
<h3 id="克隆远程仓库"><a href="#克隆远程仓库" class="headerlink" title="克隆远程仓库"></a>克隆远程仓库</h3><p>其它合作开发者使用<code>git clone https://github.com/ChickenPopcorny/test.git</code>命令可以将远程仓库克隆到本地仓库。克隆命令不需要权限，因为仓库的权限是公共的。</p>
<h3 id="邀请合作开发者"><a href="#邀请合作开发者" class="headerlink" title="邀请合作开发者"></a>邀请合作开发者</h3><p>合作开发者克隆仓库后，并不能直接使用<code>push</code>命令将修改推送到远程仓库，因为没有权限。管理者需要在项目的设置页面添加想要邀请的合作开发者，而且合作开发者需要接受邀请后，才能使用<code>push</code>命令推送修改。</p>
<p><img src="https://ae01.alicdn.com/kf/H91859d7d81f442f3ab9564a41c8359f0f.jpg" alt=""></p>
<h3 id="拉取最新版本"><a href="#拉取最新版本" class="headerlink" title="拉取最新版本"></a>拉取最新版本</h3><p>合作开发者提交版本后，管理者可以通过<code>git pull 远程仓库地址 分支名称</code>命令将最新版本拉取到本地仓库并自动合并。与克隆命令不同的是，克隆命令是在本地仓库不存在的情况下使用，而后续只需要使用拉取命令即可。而且，如果远程仓库版本高于本地，那么本地是不能推送的，必须先使用<code>pull</code>命令获取最新版本，才能进行推送。</p>
</div>
    </div>
</div>

<div class="toc"></div>
    <footer>
    <p>© 2020</p>
    <p>Theme chicken by 小鸡米花, Powered by Hexo</p>
</footer>
    <a class="back-to-top" href="javascript:;"></a>

    <script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>
    <script defer src="https://cdn.staticfile.org/KaTeX/0.11.1/katex.min.js"></script>
    <script defer src="https://cdn.staticfile.org/KaTeX/0.11.1/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, { strict: false, delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}] });"></script>
    <script src="https://cdn.staticfile.org/tocbot/4.10.0/tocbot.min.js"></script>
    <script src="https://cdn.staticfile.org/highlight.js/9.18.1/highlight.min.js"></script>

    <script>
        // 为标签追加字体图标
        $('.tag-list-item').prepend('<span class="iconfont icon-biaoqian"></span>')

        // 回到顶部的猫
        $('.back-to-top').click(function () {
            $('html, body').animate({
                scrollTop: 0
            }, 500)
        })

        // 监听 回到顶部的猫 是否显示
        $(document).scroll(function () {
            if ($(document).scrollTop() > 50) {
                $('.back-to-top').addClass('show')
            } else {
                $('.back-to-top').removeClass('show')
            }
        })

        // 在表格外包裹一层，用来生成滚动条
        $('.post-content > table').wrap('<div class="table-container"></div>')

        // Tocbot 实例化，用来快速生成文档目录
        tocbot.init({
            tocSelector: '.toc', // 渲染目录的容器
            contentSelector: '.post-content', // 标题所在的容器
            headingSelector: 'h2, h3', // 要渲染的目录层级,
            headingsOffset: -50, // 微调目录高亮的显示位置（偏移量），防止点击的链接和高亮的链接不一致
        })

        // 初始化代码高亮 highlight.js
        hljs.initHighlightingOnLoad()

        // 自动加载 waifu
        try {
            $("<link>").attr({ href: "//cdn.yesuanzao.cn/blog/live2d/waifu.min.css", rel: "stylesheet", type: "text/css" }).appendTo('head');
            $('body').append('<div class="waifu"><div class="waifu-tips"></div><canvas id="live2d" class="live2d"></canvas><div class="waifu-tool"><span class="fui-home"></span> <span class="fui-chat"></span> <span class="fui-eye"></span> <span class="fui-user"></span> <span class="fui-photo"></span> <span class="fui-info-circle"></span> <span class="fui-cross"></span></div></div>');
            $.ajax({ url: '//cdn.yesuanzao.cn/blog/live2d/waifu-tips.js', dataType: "script", cache: true, async: false });
            $.ajax({ url: '//cdn.yesuanzao.cn/blog/live2d/live2d.min.js', dataType: "script", cache: true, async: false });
            initModel('//cdn.yesuanzao.cn/blog/live2d/waifu-tips.json');
        } catch (err) { console.log(err) }
    </script>
    <!-- 
        添加控制台，测试移动端
        <script src="http://cdn.jsdelivr.net/npm/eruda"></script>
        <script>eruda.init();</script>
    -->
</body>

</html>