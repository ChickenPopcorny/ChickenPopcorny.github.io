<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>这是一个神奇的主题</title>
    <link rel="stylesheet" href="http://cdn.yesuanzao.cn/blog/chicken.css">
    <link rel="stylesheet" href="/css/iconfont.css">
    <link rel="stylesheet" href="http://cdn.yesuanzao.cn/blog/atom-one-dark.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.11.1/katex.min.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/tocbot/4.10.0/tocbot.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/5.12.1/css/all.min.css">
<meta name="generator" content="Hexo 4.2.0"></head>

<body>
    <header>
    <div class="container">
        <div class="site-title"><a href="/">小鸡米花的知识库</a></div>
        <nav>
            <a class="nav-item " href="/">主页</a>
            <a class="nav-item " href="/archives">时光轴</a>
        </nav>
    </div>
</header>
    <div id="write">
    <div class="container">
        <div class="post-info">
            <ul class="tag-list">
                
            </ul>
        </div>
        <div class="post-content"><h1 id="👩‍💻-字符集和编码"><a href="#👩‍💻-字符集和编码" class="headerlink" title="👩‍💻 字符集和编码"></a>👩‍💻 字符集和编码</h1><p>计算机本身无法识别字符，因此通过字符集将每个字符表示成一个十进制数字，相当于为每个字符起一个编号（学名为码点，Code Point）。</p>
<p>最早的字符集为美国采用的 ASCII，包含了英文字母、数字和简单符号在内的 127 个字符。但随着计算机在全世界逐渐普及，其它国家的文字就无法使用 ASCII 字符集表示了。因此各个国家纷纷建立了自己的字符集，如中国的 GB2312（后来进化为字库更加庞大的 GBK）、台湾的 BIG5 等。</p>
<blockquote>
<p>微软在 Windows 中将这些各国家自己的字符集统称为 ANSI 字符集，然后根据用户地区来识别究竟应该使用具体哪一种本地的字符集。</p>
</blockquote>
<p>但是，如此多的字符集带来了新的问题，因为同一个字符在某个字符集可能是某个编号，在另外一个字符集又成为了其它编号，这使得本应正常显示的内容，在另一套字符集中成为了乱码，从而阻碍了不同地区之间信息的交互。</p>
<p>之后，为了解决字符集的不统一性，Unicode 字符集出现了。它包括了世界上所有的文字和符号，这样大家都使用这一套字符集，就不会出现乱码问题了。</p>
<p>然而，要在一个字符集中保存这么多字符，那么每个字符会占据更多的空间。比如英文字母本身在 ASCII 字符集下只需要 1 个字节就可以表示，现在则需要 3 个字节。如果只把英文字符作为 1 个字节存储，当这些数据保存到计算机后，它并不知道一次读取多少个 bit 才算是一个字符。例如<code>abc</code>三个字母在一起，写作十六进制是<code>009700980099</code>，如果一次读取两个字节则是<code>0097_0098_0099</code>，但是一次读取 3 个字节就变成了<code>009700_980099</code>，就只有两个字符了，而且表示的字符也是不正确的。</p>
<p>因此为了解决这一问题，又诞生了 UTF-8 编码方式，用来告诉计算机究竟多少字节表示一个字符。具体来说，它使用 1 ~ 4 个字节表示一个字符，根据不同符号而变化长度：</p>
<ul>
<li>对于单字节的符号，字节的第一位设为<code>0</code>，后面 7 位为这个符号的 Unicode 码，因此对于英语字母，UTF-8 编码和 ASCII 码是相同的。也就是说，只要计算机读到一个字节的第一位是<code>0</code>，那么就将其当作一个字符来读取。</li>
<li>对于<code>n</code>字节的符号（<code>n &gt; 1</code>），第一个字节的前<code>n</code>位都设为<code>1</code>，第<code>n + 1</code>位设为<code>0</code>，后面字节的前两位一律设为<code>10</code>。剩下的没有提及的二进制位，全部为这个符号的 Unicode 码。也就是说，某个字节开头有多少个<code>1</code>，就表示包括该字节在内之后的多少个字节为一个字符。</li>
</ul>
<p>如下表中展示了 Unicode 字符集与对应的 UTF-8 编码方式：</p>
<table>
<thead>
<tr>
<th>Unicode</th>
<th>UTF-8</th>
</tr>
</thead>
<tbody><tr>
<td><code>0000 0000</code>~<code>0000 007F</code></td>
<td><code>0xxxxxxx</code></td>
</tr>
<tr>
<td><code>0000 0080</code>~<code>0000 07FF</code></td>
<td><code>110xxxxx 10xxxxxx</code></td>
</tr>
<tr>
<td><code>0000 0800</code>~<code>0000 FFFF</code></td>
<td><code>1110xxxx 10xxxxxx 10xxxxxx</code></td>
</tr>
<tr>
<td><code>0001 0000</code>~<code>0010 FFFF</code></td>
<td><code>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</code></td>
</tr>
</tbody></table>
<p>以汉字「严」为例，它的 Unicode 字符集码点为<code>4E25</code>，根据上表，发现<code>4E25</code>位于第三行范围内。因此将<code>4E25</code>转换为二进制的，<strong>从低位开始</strong>依次填充到相应的 UTF-8 格式内，不足的高位处补<code>0</code>，从而得到「严」的 UTF-8 编码。由于汉字均位于第三行范围之内，所以汉字的 UTF-8 编码会占 3 个字节。</p>
<p><img src="https://pic3.superbed.cn/item/5df9530576085c3289776890.jpg" alt=""></p>
<p>此时，当计算机读取到<code>11100100</code>这第一个字节后，就知道包括该字节在内的连续三个字节为一个字符，根据格式去掉冗余位之后，就能解析出该字符的二进制为<code>0100 111000 100101</code>，从而在 Unicode 字符集找到该码点对应的字符「严」了。</p>
</div>
    </div>
</div>

<div class="toc"></div>
    <footer>
    <p>© 2020</p>
    <p>Theme chicken by 小鸡米花, Powered by Hexo</p>
</footer>
    <a class="back-to-top" href="javascript:;"></a>

    <script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>
    <script defer src="https://cdn.staticfile.org/KaTeX/0.11.1/katex.min.js"></script>
    <script defer src="https://cdn.staticfile.org/KaTeX/0.11.1/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, { strict: false, delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}] });"></script>
    <script src="https://cdn.staticfile.org/tocbot/4.10.0/tocbot.min.js"></script>
    <script src="https://cdn.staticfile.org/highlight.js/9.18.1/highlight.min.js"></script>
    <script src="http://cdn.yesuanzao.cn/blog/live2d/autoload.js" type="text/javascript"></script>
    <script src="http://cdn.yesuanzao.cn/blog/chicken.js"></script>
    <!-- 
        添加控制台，测试移动端
        <script src="http://cdn.jsdelivr.net/npm/eruda"></script>
        <script>eruda.init();</script>
    -->
</body>

</html>