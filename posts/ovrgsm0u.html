<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>å°é¸¡ç±³èŠ±çš„çŸ¥è¯†åº“</title>
    <link rel="stylesheet" href="//cdn.yesuanzao.cn/blog/atom-one-dark.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.11.1/katex.min.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/tocbot/4.10.0/tocbot.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/5.12.1/css/all.min.css">
    <!-- æœ¬åœ°é™æ€æ–‡ä»¶æµ‹è¯• -->
    <link rel="stylesheet" href="/css/chicken.css">
<meta name="generator" content="Hexo 4.2.0"></head>

<body>
    <header>
    <div class="container">
        <div class="site-title"><a href="/">å°é¸¡ç±³èŠ±çš„çŸ¥è¯†åº“</a></div>
        <nav>
            <a class="nav-item " href="/">ä¸»é¡µ</a>
            <a class="nav-item " href="/archives">æ—¶å…‰è½´</a>
        </nav>
    </div>
</header>
    <div id="write">
    <div class="container">
        <div class="post-info">
            <ul class="tag-list">
                
                    <a class="tag-list-item" href="/tags/JavaScript/">JavaScript</a>
                
                    <a class="tag-list-item" href="/tags/Vue-js/">Vue.js</a>
                
            </ul>
        </div>
        <div class="post-content"><h1 id="ğŸ€-ä½¿ç”¨-axios-å‘é€-Ajax-è¯·æ±‚"><a href="#ğŸ€-ä½¿ç”¨-axios-å‘é€-Ajax-è¯·æ±‚" class="headerlink" title="ğŸ€ ä½¿ç”¨ axios å‘é€ Ajax è¯·æ±‚"></a>ğŸ€ ä½¿ç”¨ axios å‘é€ Ajax è¯·æ±‚</h1><p>Vue å®˜æ–¹æ¨èä½¿ç”¨<a href="https://github.com/axios/axios" target="_blank" rel="noopener">axios</a>å‘é€ Ajax è¯·æ±‚ã€‚</p>
<pre><code class="powershell">npm i axios</code></pre>
<pre><code class="js">const axios = require(&#39;axios&#39;)

// axios(config) é€šç”¨çš„å‘é€æ–¹å¼
axios({
    url: &#39;https://httpbin.org/post&#39;,    // è¯·æ±‚åœ°å€
    method: &#39;post&#39;,                     // è¯·æ±‚æ–¹å¼ï¼Œé»˜è®¤ get
    data: { msg: &#39;hello&#39; },             // è¯·æ±‚ä½“çš„æ•°æ®ï¼Œåªå¯¹ PUTã€POSTã€PATCH ä¸‰ç§è¯·æ±‚æ–¹å¼æœ‰æ•ˆ
    params: { id: 233 }                 // URL è¯·æ±‚å‚æ•°ï¼Œä¼šè‡ªåŠ¨æ‹¼æ¥ä¸º ? åé¢çš„éƒ¨åˆ†
})
    .then(res =&gt; {})                    // è¯·æ±‚æˆåŠŸè·å–ç»“æœ
    .catch(err =&gt; {})                   // è¯·æ±‚å¤±è´¥è·å–é”™è¯¯ä¿¡æ¯

// axios.get(url [,config]) å¿«é€Ÿå‘é€ get è¯·æ±‚
axios.get(&#39;https://httpbin.org/get&#39;, {
    params: { id: 233 }
})
    .then(res =&gt; {})
    .catch(err =&gt; {})

// axios.post(url [,data [,config]])
axios.post(&#39;https://httpbin.org/post&#39;, {
    username: &#39;hello@163.com&#39;
})
    .then(res =&gt; {})
    .catch(err =&gt; {})

// axios.all() ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„é¡¹ä¸ºä¸€ä¸ªè¯·æ±‚ï¼Œåªæœ‰å½“å…¨éƒ¨è¯·æ±‚æˆåŠŸåæ‰ä¼šè°ƒç”¨ then()
axios.all([
    axios.get(&#39;https://httpbin.org/get&#39;),
    axios.post(&#39;https://httpbin.org/post&#39;)
])
    .then(res =&gt; {})</code></pre>
<p>å¯ä»¥å¯¹è¯·æ±‚è¿›è¡Œä¸€äº›è‡ªå®šä¹‰é…ç½®ï¼š</p>
<pre><code class="js">// å…¨å±€é…ç½®
axios.defaults.baseURL = &#39;http://192.168.50.205/&#39;   // é…ç½®æ¥å£çš„æ ¹è·¯å¾„ï¼Œæ¯ä¸ª url å‰ä¼šè‡ªåŠ¨æ·»åŠ è¯¥æ ¹è·¯å¾„
axios.defaults.timeout = 5000                       // æœ€é•¿ç­‰å¾…æ—¶é—´ï¼Œå•ä½æ¯«ç§’ï¼Œå¦‚æœè¶…è¿‡è¯¥æ—¶é—´åˆ™åˆ¤å®šä¸ºè¯·æ±‚è¶…æ—¶

// è¿˜å¯ä»¥åˆ›å»ºå•ç‹¬çš„ axios å®ä¾‹è¿›è¡Œå±€éƒ¨é…ç½®
const axios1 = axios.create({
    baseURL: &#39;http://192.168.50.205/&#39;, 
})
const axios2 = axios.create({
    baseURL: &#39;https://httpbin.org/&#39;, 
})

axios1({}) // ä½¿ç”¨ axios1 çš„é…ç½®</code></pre>
<h3 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h3><p>ä½¿ç”¨æ‹¦æˆªå™¨å¯ä»¥ç»Ÿä¸€å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œå¤„ç†ã€‚</p>
<pre><code class="js">// ç»Ÿä¸€å¤„ç†å“åº”
axios.interceptors.response.use(res =&gt; {
    // é»˜è®¤çš„å“åº”å†…å®¹ä¼šåŒ…å« statusã€message ç­‰å†—ä½™æ•°æ®ï¼Œé€šè¿‡è¿”å›å€¼å¯ä»¥ä»…å°†æ•°æ®éƒ¨åˆ†è¿”å›
    // è¿™æ · ajax è¯·æ±‚æ‹¿åˆ°çš„å“åº”æ•°æ®å°±æ˜¯ä»…åŒ…å« data çš„éƒ¨åˆ†äº†
    return res.data
}, err =&gt; {
    // å¦‚æœ HTTP çŠ¶æ€ç ä¸ä¸º 200ï¼Œä¼šç»Ÿä¸€æ¥åˆ°é”™è¯¯å¤„ç†éƒ¨åˆ†
    console.log(&#39;ç½‘ç»œå‡ºç°é—®é¢˜äº†ï¼Œç¨åå†è¯•å§&#39;)
})

// ç»Ÿä¸€å¤„ç†è¯·æ±‚
axios.interceptors.request.use(config =&gt; {
    // è®¾ç½®åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ token ç”¨äºèº«ä»½è®¤è¯
    config.headers.Authorization = &#39;xxx.yyy.zzz&#39;
    // åˆ‡è®°è¦å°†é…ç½®è¿”å›ï¼Œå¦åˆ™åç»­çš„æ–¹æ³•æ— æ³•è·å–åˆ°è¿™äº›ä¿¡æ¯
    return config
}, err =&gt; {
    // å¤„ç†é”™è¯¯
})</code></pre>
</div>
    </div>
</div>

<div class="toc"></div>
    <footer>
    <p>Â© 2020</p>
    <p>Theme chicken by å°é¸¡ç±³èŠ±, Powered by Hexo</p>
</footer>
    <a class="back-to-top" href="javascript:;"></a>

    <script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>
    <script defer src="https://cdn.staticfile.org/KaTeX/0.11.1/katex.min.js"></script>
    <script defer src="https://cdn.staticfile.org/KaTeX/0.11.1/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, { strict: false, delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}] });"></script>
    <script src="https://cdn.staticfile.org/tocbot/4.10.0/tocbot.min.js"></script>
    <script src="https://cdn.staticfile.org/highlight.js/9.18.1/highlight.min.js"></script>

    <script>
        // ä¸ºæ ‡ç­¾è¿½åŠ å­—ä½“å›¾æ ‡
        $('.tag-list-item').prepend('<i class="fas fa-tag"></i>')

        // å›åˆ°é¡¶éƒ¨çš„çŒ«
        $('.back-to-top').click(function () {
            $('html, body').animate({
                scrollTop: 0
            }, 500)
        })

        // ç›‘å¬ å›åˆ°é¡¶éƒ¨çš„çŒ« æ˜¯å¦æ˜¾ç¤º
        $(document).scroll(function () {
            if ($(document).scrollTop() > 50) {
                $('.back-to-top').addClass('show')
            } else {
                $('.back-to-top').removeClass('show')
            }
        })

        // åœ¨è¡¨æ ¼å¤–åŒ…è£¹ä¸€å±‚ï¼Œç”¨æ¥ç”Ÿæˆæ»šåŠ¨æ¡
        $('.post-content > table').wrap('<div class="table-container"></div>')

        // Tocbot å®ä¾‹åŒ–ï¼Œç”¨æ¥å¿«é€Ÿç”Ÿæˆæ–‡æ¡£ç›®å½•
        tocbot.init({
            tocSelector: '.toc', // æ¸²æŸ“ç›®å½•çš„å®¹å™¨
            contentSelector: '.post-content', // æ ‡é¢˜æ‰€åœ¨çš„å®¹å™¨
            headingSelector: 'h2, h3', // è¦æ¸²æŸ“çš„ç›®å½•å±‚çº§,
            headingsOffset: -50, // å¾®è°ƒç›®å½•é«˜äº®çš„æ˜¾ç¤ºä½ç½®ï¼ˆåç§»é‡ï¼‰ï¼Œé˜²æ­¢ç‚¹å‡»çš„é“¾æ¥å’Œé«˜äº®çš„é“¾æ¥ä¸ä¸€è‡´
        })

        // åˆå§‹åŒ–ä»£ç é«˜äº® highlight.js
        hljs.initHighlightingOnLoad()

        // è‡ªåŠ¨åŠ è½½ waifu
        try {
            $("<link>").attr({ href: "//cdn.yesuanzao.cn/blog/live2d/waifu.min.css", rel: "stylesheet", type: "text/css" }).appendTo('head');
            $('body').append('<div class="waifu"><div class="waifu-tips"></div><canvas id="live2d" class="live2d"></canvas><div class="waifu-tool"><span class="fui-home"></span> <span class="fui-chat"></span> <span class="fui-eye"></span> <span class="fui-user"></span> <span class="fui-photo"></span> <span class="fui-info-circle"></span> <span class="fui-cross"></span></div></div>');
            $.ajax({ url: '//cdn.yesuanzao.cn/blog/live2d/waifu-tips.js', dataType: "script", cache: true, async: false });
            $.ajax({ url: '//cdn.yesuanzao.cn/blog/live2d/live2d.min.js', dataType: "script", cache: true, async: false, success: function() {
                initModel('//cdn.yesuanzao.cn/blog/live2d/waifu-tips.json');
            } });
        } catch (err) { console.log(err) }
    </script>
    <!-- 
        æ·»åŠ æ§åˆ¶å°ï¼Œæµ‹è¯•ç§»åŠ¨ç«¯
        <script src="http://cdn.jsdelivr.net/npm/eruda"></script>
        <script>eruda.init();</script>
    -->
</body>

</html>