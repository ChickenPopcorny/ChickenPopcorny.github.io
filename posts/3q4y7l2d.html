<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>è¿™æ˜¯ä¸€ä¸ªç¥å¥‡çš„ä¸»é¢˜</title>
    <!-- <link rel="stylesheet" href="/css/chicken.css"> -->
    <link rel="stylesheet" href="//cdn.yesuanzao.cn/chicken.css">
    <link rel="stylesheet" href="/css/iconfont.css">
    <link rel="stylesheet" href="//cdn.yesuanzao.cn/blog/atom-one-dark.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.11.1/katex.min.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/tocbot/4.10.0/tocbot.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/5.12.1/css/all.min.css">
<meta name="generator" content="Hexo 4.2.0"></head>

<body>
    <header>
    <div class="container">
        <div class="site-title"><a href="/">å°é¸¡ç±³èŠ±çš„çŸ¥è¯†åº“</a></div>
        <nav>
            <a class="nav-item " href="/">ä¸»é¡µ</a>
            <a class="nav-item " href="/archives">æ—¶å…‰è½´</a>
        </nav>
    </div>
</header>
    <div id="write">
    <div class="container">
        <div class="post-info">
            <ul class="tag-list">
                
                    <a class="tag-list-item" href="/tags/%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/">æ¨¡æ¿å¼•æ“</a>
                
            </ul>
        </div>
        <div class="post-content"><h1 id="ğŸ“„-art-template"><a href="#ğŸ“„-art-template" class="headerlink" title="ğŸ“„ art-template"></a>ğŸ“„ art-template</h1><p>æ–½å·¥ä¸­ï¼Œä¿®æ”¹æ—¶é—´</p>
<p><a href="http://aui.github.io/art-template/zh-cn/docs/" target="_blank" rel="noopener">art-template</a>æ˜¯ä¸€æ¬¾å›½å†…å¼€å‘çš„æ¨¡æ¿å¼•æ“ï¼Œç”±äºæœ‰ä¸­æ–‡æ–‡æ¡£ï¼Œå¹¶ä¸”è¯­æ³•ç®€å•å®¹æ˜“ä¸Šæ‰‹ï¼Œéå¸¸é€‚åˆåˆå­¦è€…ä½¿ç”¨ã€‚</p>
<pre><code class="powershell">npm install art-template</code></pre>
<pre><code class="js">const template = require(&#39;art-template&#39;)</code></pre>
<h3 id="æ‹¼æ¥æ¨¡æ¿å’Œæ•°æ®"><a href="#æ‹¼æ¥æ¨¡æ¿å’Œæ•°æ®" class="headerlink" title="æ‹¼æ¥æ¨¡æ¿å’Œæ•°æ®"></a>æ‹¼æ¥æ¨¡æ¿å’Œæ•°æ®</h3><p>é¦–å…ˆé€šè¿‡<code>template()</code>æ–¹æ³•å°†æ¨¡æ¿å’Œæ•°æ®æ‹¼æ¥èµ·æ¥ã€‚</p>
<blockquote>
<ul>
<li>å‚æ•°â‘ ï¼šæ¨¡æ¿çš„è·¯å¾„</li>
<li>å‚æ•°â‘¡ï¼šè¦æ‹¼æ¥çš„æ•°æ®ï¼Œå¿…é¡»æ˜¯å¯¹è±¡</li>
<li>è¿”å›å€¼ï¼šæ‹¼æ¥åçš„ HTML ä»£ç </li>
</ul>
</blockquote>
<pre><code class="js">resPage = template(&#39;/list.html&#39;, { name: &#39;å¾¡å‚ç¾ç´&#39;, age: 16 }) // =&gt; æˆ‘æ˜¯å¾¡å‚ç¾ç´ï¼Œä»Šå¹´16å²å•¦ï¼</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œåœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ç‰¹å®šçš„è¯­æ³•å³å¯ä½¿ç”¨ä¼ å…¥çš„æ•°æ®ã€‚</p>
<pre><code class="ejs">æˆ‘æ˜¯ {{ name }}ï¼Œä»Šå¹´ {{ age }} å²å•¦ï¼</code></pre>
<h2 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h2><h3 id="è¾“å‡º"><a href="#è¾“å‡º" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h3><p>ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼å¯ä»¥ç›´æ¥å–å‡ºå¯¹è±¡æˆ–æ•°ç»„ä¸­çš„å€¼è¿›è¡Œè¾“å‡ºï¼Œå¹¶ä¸”æ”¯æŒç®€å•çš„è¡¨è¾¾å¼è¿ç®—ã€‚æ³¨æ„ï¼Œæ¨¡æ¿å¼•æ“ä¼šè‡ªåŠ¨å°† HTML æ ‡è®°è¿›è¡Œè½¬ä¹‰å¤„ç†ï¼Œä¸ä¼šè¿›è¡Œè§£æã€‚</p>
<pre><code class="js">template(tplPath, { 
    name: &#39;å¾¡å‚ç¾ç´&#39;, 
    age: 16, 
    hobbies: [&#39;æ‰“äºº&#39;, &#39;æ”¾ç”µ&#39;], 
    friend: { name: &#39;ç™½äº•é»‘å­&#39; } 
})</code></pre>
<pre><code>{{ name }} // =&gt; å¾¡å‚ç¾ç´
{{ hobbies[0] }} // =&gt; æ‰“äººï¼Œé€šå¸¸ç”¨ä¸‹é¢çš„å¾ªç¯æ¥éå†æ•°ç»„
{{ friend.name }} // =&gt; ç™½äº•é»‘å­
{{ age > 18 ? 'å·²æˆå¹´' : 'æœªæˆå¹´' }} // =&gt; æœªæˆå¹´ï¼Œæ³¨æ„å…¶ä¸­æ˜¾ç¤ºçš„å€¼è¦ç”¨å•å¼•å·åŒ…è£¹</code></pre><h3 id="æ¡ä»¶"><a href="#æ¡ä»¶" class="headerlink" title="æ¡ä»¶"></a>æ¡ä»¶</h3><p>æ ¹æ®æ•°æ®å¯ä»¥åˆ¤æ–­æŸäº› HTML æ˜¯å¦å‡ºç°ã€‚</p>
<pre><code>{{if age > 18}} æˆ‘è¦ä¸Šç½‘å§ï¼{{/if}}

{{if price < 10}}
    è¿™ä¸ªå¥½ä¾¿å®œ
{{else if price < 20}}
    è¿˜å¯ä»¥
{{else}}
    å¤ªè´µäº†ï¼
{{/if}}</code></pre><h3 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h3><p>é€šè¿‡å¾ªç¯å¯ä»¥éå†æ•°ç»„å’Œå¯¹è±¡ã€‚åœ¨å¾ªç¯ä¸­ä½¿ç”¨<code>$value</code>å’Œ<code>$index</code>å¯ä»¥è·å–å½“å‰å…ƒç´ çš„å€¼å’Œç´¢å¼•ã€‚</p>
<pre><code>{{ each hobbies }}
    å½“å‰ä¸º {{ $index }} å·å…ƒç´ ï¼Œå€¼ä¸º{{ $value }}
{{ /each }}</code></pre><p>å¦‚æœåªéœ€è¦éå†æŒ‡å®šçš„æ¬¡æ•°ï¼ˆæ¯”å¦‚å¾ªç¯è¾“å‡ºåˆ†é¡µæŒ‰é’®ï¼‰ï¼Œé‚£ä¹ˆåªèƒ½ä½¿ç”¨åŸå§‹è¯­æ³•ï¼š</p>
<pre><code class="ejs">&lt;% for(var i = 0; i &lt; totalPage; i++){ %&gt;
    &lt;li class=&quot;page-item&quot;&gt;&lt;a class=&quot;page-link&quot; href=&quot;/admin/user/?page={{ i }}&quot;&gt; {{ i }} &lt;/a&gt;&lt;/li&gt;
&lt;% } %&gt;</code></pre>
<h3 id="å­æ¨¡æ¿"><a href="#å­æ¨¡æ¿" class="headerlink" title="å­æ¨¡æ¿"></a>å­æ¨¡æ¿</h3><p>é€šè¿‡å­æ¨¡æ¿å¯ä»¥å°†é¡µé¢å…¬å…±çš„éƒ¨åˆ†æŠ½ç¦»å‡ºæ¥ï¼Œæ–¹ä¾¿ç»Ÿä¸€ç»´æŠ¤ã€‚æ³¨æ„è¿™é‡Œçš„è·¯å¾„ä½¿ç”¨ç›¸å¯¹è·¯å¾„å³å¯ï¼Œå®ƒç›¸å¯¹çš„æ˜¯å½“å‰æ¨¡æ¿ï¼Œè€Œä¸æ˜¯è°ƒç”¨å®ƒçš„ JavaScript æ–‡ä»¶ã€‚</p>
<pre><code>{{ include './list.art' }} </code></pre><h3 id="æ¨¡æ¿ç»§æ‰¿"><a href="#æ¨¡æ¿ç»§æ‰¿" class="headerlink" title="æ¨¡æ¿ç»§æ‰¿"></a>æ¨¡æ¿ç»§æ‰¿</h3><p>é€šè¿‡æ¨¡æ¿ç»§æ‰¿å¯ä»¥ä½¿å¤šä¸ªé¡µé¢æ¨¡æ¿ç»§æ‰¿å…±åŒçš„ä¸€ä¸ª HTML éª¨æ¶ï¼Œå¯¹äºæ¯ä¸ªé¡µé¢ç‹¬æœ‰çš„å†…å®¹ï¼Œå¯ä»¥åœ¨éª¨æ¶é¡µé¢ä¸­é¢„ç•™ä½ç½®ï¼Œå­æ¨¡æ¿åªéœ€è¦è®¾ç½®é¢„ç•™ä½ç½®çš„å†…å®¹å³å¯ã€‚</p>
<p>ä¸‹é¢çš„éª¨æ¶æ¨¡æ¿ä¸­é€šè¿‡åŒæ ‡è®°<code>{{block}}</code>é¢„ç•™äº†ä¸¤ä¸ªä½ç½®ï¼Œä¸ºäº†åŒºåˆ†å®ƒä»¬ï¼Œå¯ä»¥åœ¨å…¶ä¸­è‡ªå®šä¹‰ä¸€ä¸ªåç§°ã€‚</p>
<pre><code>// éª¨æ¶æ¨¡æ¿ layout.art
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
    {{block 'title'}} {{/block}}
&lt;/head&gt;
&lt;body&gt;
    {{block 'content'}} {{/block}}
&lt;/body&gt;
&lt;/html&gt;</code></pre><p>æ¥ä¸‹æ¥ï¼Œåœ¨å­æ¨¡æ¿ä¸­ä½¿ç”¨<code>extend</code>å¼•å…¥éª¨æ¶ï¼Œå¹¶è®¾ç½®é¢„ç•™å†…å®¹ã€‚</p>
<pre><code>{{extend './layout.art'}}

{{block 'title'}}
    &lt;title&gt;é¦–é¡µ&lt;/title&gt;
{{/block}}

{{block 'content'}}
    &lt;p&gt;è¿™é‡Œæ˜¯é¦–é¡µå•¦&lt;/p&gt;
{{/block}}</code></pre><h2 id="é…ç½®é€‰é¡¹"><a href="#é…ç½®é€‰é¡¹" class="headerlink" title="é…ç½®é€‰é¡¹"></a>é…ç½®é€‰é¡¹</h2><p>é…ç½®é€‰é¡¹é€šè¿‡<code>template.defaults</code>å¯¹è±¡è®¾ç½®ã€‚</p>
<h3 id="extname"><a href="#extname" class="headerlink" title="extname"></a>extname</h3><p>æ¨¡æ¿é»˜è®¤çš„åç¼€åæ˜¯<code>.art</code>ï¼Œå¦‚æœä¼ å…¥è·¯å¾„å‚æ•°æ—¶çœç•¥äº†åç¼€åï¼Œé‚£ä¹ˆæ¨¡æ¿å¼•æ“ä¼šè‡ªåŠ¨è¡¥å……ã€‚</p>
<pre><code class="js">template.defaults.extname = &#39;.html&#39;</code></pre>
<h3 id="root"><a href="#root" class="headerlink" title="root"></a>root</h3><p>æ¨¡æ¿é€šå¸¸ä¼šæ”¾åˆ°ç»Ÿä¸€çš„æ–‡ä»¶å¤¹ä¸­ï¼Œä½¿ç”¨è¯¥å±æ€§å¯ä»¥ä¿®æ”¹æ¨¡æ¿çš„æ ¹ç›®å½•ã€‚</p>
<pre><code class="js">template.defaults.root = path.join(__dirname, &#39;views&#39;)
// å¼•å…¥æ¨¡æ¿æ—¶ï¼Œå¯ä»¥çœç•¥æ‹¼æ¥è·¯å¾„å’Œåç¼€äº†
template(&#39;index&#39;, data)</code></pre>
<h2 id="æµè§ˆå™¨ç¯å¢ƒ"><a href="#æµè§ˆå™¨ç¯å¢ƒ" class="headerlink" title="æµè§ˆå™¨ç¯å¢ƒ"></a>æµè§ˆå™¨ç¯å¢ƒ</h2><p>å‰å°çš„æ¨¡æ¿è¯­æ³•ä¸èƒ½ç›´æ¥å†™åœ¨é¡µé¢ä¸Šï¼Œå› ä¸ºå…¶ä¸­çš„è¯­æ³•éƒ¨åˆ†ä¼šè¢«æµè§ˆå™¨å½“åšæ™®é€šæ–‡æœ¬å‘ˆç°å‡ºæ¥ã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†æ¨¡æ¿æ”¾å…¥<code>&lt;script&gt;</code>æ ‡ç­¾ä¸­ï¼Œå®ƒçš„å†…å®¹é»˜è®¤ä¼šè¢«æµè§ˆå™¨éšè—ï¼Œè€Œä¸”åªè¦å°†å…¶è®¾ç½®ä¸º<code>type=&quot;text/html&quot;</code>å°±èƒ½å°†å…¶ä¸­çš„ HTML å…ƒç´ æ­£å¸¸ç€è‰²ã€‚</p>
<pre><code class="html">&lt;script id=&quot;tpl-users&quot; type=&quot;text/html&quot;&gt;&lt;/script&gt;</code></pre>
<p>ç„¶åï¼Œä¾ç„¶ä½¿ç”¨æ¨¡æ¿å¼•æ“çš„<code>template()</code>æ–¹æ³•ï¼Œå°†æ¨¡æ¿ä¸æ•°æ®è”ç³»èµ·æ¥ã€‚</p>
<blockquote>
<ul>
<li>å‚æ•°â‘ ï¼šæ¨¡æ¿å…ƒç´ çš„<code>id</code></li>
<li>å‚æ•°â‘¡ï¼šè¦æ‹¼æ¥çš„æ•°æ®ï¼Œå¿…é¡»æ˜¯å¯¹è±¡</li>
<li>è¿”å›å€¼ï¼šæ‹¼æ¥åçš„ HTML ä»£ç </li>
</ul>
</blockquote>
<pre><code class="js">let html = template(&#39;tpl-users&#39;, { name: &#39;å¾¡å‚ç¾ç´&#39;, age: 16 })</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œé€šè¿‡æ¨¡æ¿å¼•æ“çš„è¯­æ³•åœ¨æ¨¡æ¿ä¸­è§£ææ•°æ®ï¼š</p>
<pre><code class="html">&lt;script id=&quot;tpl-users&quot; type=&quot;text/html&quot;&gt;
    æˆ‘æ˜¯{{ name }}ï¼Œä»Šå¹´{{ age }}å²å•¦ï¼
&lt;/script&gt;</code></pre>
<p>æœ€åï¼Œå°†<code>template()</code>æ–¹æ³•è¿”å›çš„æ‹¼æ¥å­—ç¬¦ä¸²è¿½åŠ åˆ°é¡µé¢å…ƒç´ ä¸­å³å¯ã€‚</p>
<pre><code class="js">$(&#39;.msg&#39;).html(html)</code></pre>
</div>
    </div>
</div>

<div class="toc"></div>
    <footer>
    <p>Â© 2020</p>
    <p>Theme chicken by å°é¸¡ç±³èŠ±, Powered by Hexo</p>
</footer>
    <a class="back-to-top" href="javascript:;"></a>

    <script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>
    <script defer src="https://cdn.staticfile.org/KaTeX/0.11.1/katex.min.js"></script>
    <script defer src="https://cdn.staticfile.org/KaTeX/0.11.1/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, { strict: false, delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}] });"></script>
    <script src="https://cdn.staticfile.org/tocbot/4.10.0/tocbot.min.js"></script>
    <script src="https://cdn.staticfile.org/highlight.js/9.18.1/highlight.min.js"></script>

    <script>
        // ä¸ºæ ‡ç­¾è¿½åŠ å­—ä½“å›¾æ ‡
        $('.tag-list-item').prepend('<span class="iconfont icon-biaoqian"></span>')

        // å›åˆ°é¡¶éƒ¨çš„çŒ«
        $('.back-to-top').click(function () {
            $('html, body').animate({
                scrollTop: 0
            }, 500)
        })

        // ç›‘å¬ å›åˆ°é¡¶éƒ¨çš„çŒ« æ˜¯å¦æ˜¾ç¤º
        $(document).scroll(function () {
            if ($(document).scrollTop() > 50) {
                $('.back-to-top').addClass('show')
            } else {
                $('.back-to-top').removeClass('show')
            }
        })

        // åœ¨è¡¨æ ¼å¤–åŒ…è£¹ä¸€å±‚ï¼Œç”¨æ¥ç”Ÿæˆæ»šåŠ¨æ¡
        $('.post-content > table').wrap('<div class="table-container"></div>')

        // Tocbot å®ä¾‹åŒ–ï¼Œç”¨æ¥å¿«é€Ÿç”Ÿæˆæ–‡æ¡£ç›®å½•
        tocbot.init({
            tocSelector: '.toc', // æ¸²æŸ“ç›®å½•çš„å®¹å™¨
            contentSelector: '.post-content', // æ ‡é¢˜æ‰€åœ¨çš„å®¹å™¨
            headingSelector: 'h2, h3', // è¦æ¸²æŸ“çš„ç›®å½•å±‚çº§,
            headingsOffset: -50, // å¾®è°ƒç›®å½•é«˜äº®çš„æ˜¾ç¤ºä½ç½®ï¼ˆåç§»é‡ï¼‰ï¼Œé˜²æ­¢ç‚¹å‡»çš„é“¾æ¥å’Œé«˜äº®çš„é“¾æ¥ä¸ä¸€è‡´
        })

        // åˆå§‹åŒ–ä»£ç é«˜äº® highlight.js
        hljs.initHighlightingOnLoad()

        // è‡ªåŠ¨åŠ è½½ waifu
        try {
            $("<link>").attr({ href: "//cdn.yesuanzao.cn/blog/live2d/waifu.min.css", rel: "stylesheet", type: "text/css" }).appendTo('head');
            $('body').append('<div class="waifu"><div class="waifu-tips"></div><canvas id="live2d" class="live2d"></canvas><div class="waifu-tool"><span class="fui-home"></span> <span class="fui-chat"></span> <span class="fui-eye"></span> <span class="fui-user"></span> <span class="fui-photo"></span> <span class="fui-info-circle"></span> <span class="fui-cross"></span></div></div>');
            $.ajax({ url: '//cdn.yesuanzao.cn/blog/live2d/waifu-tips.js', dataType: "script", cache: true, async: false });
            $.ajax({ url: '//cdn.yesuanzao.cn/blog/live2d/live2d.min.js', dataType: "script", cache: true, async: false, complete: function() {
                initModel('//cdn.yesuanzao.cn/blog/live2d/waifu-tips.json');
            } });
        } catch (err) { console.log(err) }
    </script>
    <!-- 
        æ·»åŠ æ§åˆ¶å°ï¼Œæµ‹è¯•ç§»åŠ¨ç«¯
        <script src="http://cdn.jsdelivr.net/npm/eruda"></script>
        <script>eruda.init();</script>
    -->
</body>

</html>